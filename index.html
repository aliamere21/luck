<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8" />
  <title>لعبة صندوق الحظ 🎁</title>
  <style>
    body { font-family: 'Tahoma'; background-color: #f0f0f0; text-align: center; padding-top: 50px; }
    .box { width: 150px; height: 150px; background-color: #ccc; display: inline-block; margin: 20px; border-radius: 15px; cursor: pointer; transition: 0.3s; }
    .box:hover { transform: scale(1.05); }
    #result { font-size: 24px; margin-top: 30px; }
  </style>
</head>
<body>

  <h1>🎁 اختر صندوقك!</h1>

  <div class="box" onclick="openBox(1)">📦</div>
  <div class="box" onclick="openBox(2)">📦</div>
  <div class="box" onclick="openBox(3)">📦</div>

  <div id="result"></div>

  <!-- الأصوات -->
  <audio id="box1" src="sounds/box1.mp3"></audio>
  <audio id="box2" src="sounds/box2.mp3"></audio>
  <audio id="box3" src="sounds/box3.mp3"></audio>
  <audio id="win" src="sounds/win.mp3"></audio>
  <audio id="lose" src="sounds/lose.mp3"></audio>
  <audio id="secondChance" src="sounds/second_chance.mp3"></audio>

  <script>
    let played = false;

    function openBox(number) {
      if (played) {
        document.getElementById("result").innerText = "❗ لقد لعبت بالفعل اليوم!";
        return;
      }

      // تشغيل صوت فتح الصندوق المناسب
      document.getElementById("box" + number).play();

      // تحديد الحظ عشوائيًا
      const luck = Math.random();

      setTimeout(() => {
        if (luck < 0.4) {
          document.getElementById("lose").play();
          document.getElementById("result").innerText = "❌ لا حظ اليوم!";
        } else if (luck < 0.7) {
          document.getElementById("win").play();
          document.getElementById("result").innerText = "💰 ربحت 50 نقطة!";
        } else if (luck < 0.9) {
          document.getElementById("win").play();
          document.getElementById("result").innerText = "💰 ربحت 100 نقطة!";
        } else {
          document.getElementById("secondChance").play();
          document.getElementById("result").innerText = "🔁 فرصة ثانية! اختر صندوقاً آخر.";
          played = false; // يعطي فرصة ثانية
          return;
        }

        played = true;
      }, 800); // تأخير بسيط بعد فتح الصندوق
    }
  </script>

</body>
</html>
